<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP32 LED Matrix Controller</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .connection-info {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .connection-info h3 {
            margin-top: 0;
        }
        
        .pin-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        .pin-table th, .pin-table td {
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 8px 12px;
            text-align: left;
        }
        
        .pin-table th {
            background: rgba(255, 255, 255, 0.2);
            font-weight: bold;
        }
        
        .matrix-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }
        
        .led-matrix {
            display: grid;
            grid-template-columns: repeat(8, 35px);
            grid-template-rows: repeat(8, 35px);
            gap: 2px;
            background: #333;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        .led {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: #444;
            border: 2px solid #666;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .led:hover {
            transform: scale(1.1);
            border-color: #fff;
        }
        
        .led.on {
            background: #ff4444;
            border-color: #ff6666;
            box-shadow: 0 0 15px #ff4444;
        }
        
        .led::after {
            content: attr(data-pos);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 8px;
            color: #999;
            pointer-events: none;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .btn.secondary {
            background: linear-gradient(45deg, #3742fa, #2f3542);
        }
        
        .pattern-controls {
            text-align: center;
            margin: 20px 0;
        }
        
        .pattern-controls select {
            padding: 10px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.9);
            margin: 0 10px;
            font-size: 16px;
        }
        
        .status {
            text-align: center;
            margin: 20px 0;
            padding: 10px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .arduino-code {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            overflow-x: auto;
            margin: 20px 0;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .code-header {
            background: #4a5568;
            color: white;
            padding: 10px 20px;
            margin: -20px -20px 20px -20px;
            border-radius: 10px 10px 0 0;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî• ESP32 LED Matrix Controller</h1>
        
        <div class="connection-info">
            <h3>üìã Connection Diagram</h3>
            <table class="pin-table">
                <tr>
                    <th>ESP32 Pin</th>
                    <th>LED Matrix Pin</th>
                    <th>Function</th>
                </tr>
                <tr>
                    <td>GPIO 23</td>
                    <td>DIN</td>
                    <td>Data Input</td>
                </tr>
                <tr>
                    <td>GPIO 18</td>
                    <td>CLK</td>
                    <td>Clock</td>
                </tr>
                <tr>
                    <td>GPIO 5</td>
                    <td>CS</td>
                    <td>Chip Select</td>
                </tr>
                <tr>
                    <td>3.3V</td>
                    <td>VCC</td>
                    <td>Power</td>
                </tr>
                <tr>
                    <td>GND</td>
                    <td>GND</td>
                    <td>Ground</td>
                </tr>
            </table>
        </div>
        
        <div class="status" id="status">
            Ready to connect - Upload the Arduino code first!
        </div>
        
        <div class="matrix-container">
            <div class="led-matrix" id="ledMatrix">
                <!-- LEDs will be generated by JavaScript -->
            </div>
        </div>
        
        <div class="controls">
            <button class="btn" onclick="clearAll()">Clear All</button>
            <button class="btn" onclick="fillAll()">Fill All</button>
            <button class="btn secondary" onclick="sendPattern()">Send to ESP32</button>
        </div>
        
        <div class="pattern-controls">
            <label>Quick Patterns:</label>
            <select id="patternSelect" onchange="loadPattern()">
                <option value="">Select Pattern</option>
                <optgroup label="Basic Patterns">
                    <option value="cross">Cross</option>
                    <option value="border">Border</option>
                    <option value="diagonal">Diagonal</option>
                    <option value="checkerboard">Checkerboard</option>
                    <option value="heart">Heart ‚ù§Ô∏è</option>
                    <option value="smile">Smile üòä</option>
                </optgroup>
                <optgroup label="Alphabet A-M">
                    <option value="A">Letter A</option>
                    <option value="B">Letter B</option>
                    <option value="C">Letter C</option>
                    <option value="D">Letter D</option>
                    <option value="E">Letter E</option>
                    <option value="F">Letter F</option>
                    <option value="G">Letter G</option>
                    <option value="H">Letter H</option>
                    <option value="I">Letter I</option>
                    <option value="J">Letter J</option>
                    <option value="K">Letter K</option>
                    <option value="L">Letter L</option>
                    <option value="M">Letter M</option>
                </optgroup>
                <optgroup label="Alphabet N-Z">
                    <option value="N">Letter N</option>
                    <option value="O">Letter O</option>
                    <option value="P">Letter P</option>
                    <option value="Q">Letter Q</option>
                    <option value="R">Letter R</option>
                    <option value="S">Letter S</option>
                    <option value="T">Letter T</option>
                    <option value="U">Letter U</option>
                    <option value="V">Letter V</option>
                    <option value="W">Letter W</option>
                    <option value="X">Letter X</option>
                    <option value="Y">Letter Y</option>
                    <option value="Z">Letter Z</option>
                </optgroup>
            </select>
            <button class="btn secondary" onclick="randomPattern()">Random</button>
        </div>
        
        <div class="arduino-code">
            <div class="code-header">Arduino Code - Upload this to your ESP32</div>
#include &lt;WiFi.h&gt;
#include &lt;WebServer.h&gt;
#include &lt;LedControl.h&gt;

// WiFi credentials
const char* ssid = "Oniket Prantor";
const char* password = "amijanina";

// LED Matrix pins
const int DIN_PIN = 23;
const int CLK_PIN = 18;
const int CS_PIN = 5;

LedControl lc = LedControl(DIN_PIN, CLK_PIN, CS_PIN, 1);
WebServer server(80);

// 8x8 LED matrix state
byte matrix[8] = {0};

void setup() {
  Serial.begin(115200);
  
  // Initialize LED matrix
  lc.shutdown(0, false);
  lc.setIntensity(0, 8);
  lc.clearDisplay(0);
  
  // Connect to WiFi
  WiFi.begin(ssid, password);
  while (WiFi.status() != WL_CONNECTED) {
    delay(1000);
    Serial.println("Connecting to WiFi...");
  }
  
  Serial.println("WiFi connected!");
  Serial.print("IP address: ");
  Serial.println(WiFi.localIP());
  
  // Web server routes
  server.on("/", handleRoot);
  server.on("/set", handleSetLED);
  server.on("/clear", handleClear);
  server.on("/pattern", handlePattern);
  server.enableCORS(true);
  
  server.begin();
  Serial.println("Web server started");
}

void loop() {
  server.handleClient();
}

void handleRoot() {
  server.send(200, "text/plain", "ESP32 LED Matrix Ready");
}

void handleSetLED() {
  if (server.hasArg("row") && server.hasArg("col") && server.hasArg("state")) {
    int row = server.arg("row").toInt();
    int col = server.arg("col").toInt();
    bool state = server.arg("state").toInt();
    
    if (row &gt;= 0 && row &lt; 8 && col &gt;= 0 && col &lt; 8) {
      if (state) {
        matrix[row] |= (1 &lt;&lt; col);
      } else {
        matrix[row] &= ~(1 &lt;&lt; col);
      }
      lc.setRow(0, row, matrix[row]);
      server.send(200, "text/plain", "OK");
    } else {
      server.send(400, "text/plain", "Invalid coordinates");
    }
  } else {
    server.send(400, "text/plain", "Missing parameters");
  }
}

void handleClear() {
  for (int i = 0; i &lt; 8; i++) {
    matrix[i] = 0;
    lc.setRow(0, i, 0);
  }
  server.send(200, "text/plain", "Cleared");
}

void handlePattern() {
  if (server.hasArg("data")) {
    String data = server.arg("data");
    
    for (int row = 0; row &lt; 8; row++) {
      matrix[row] = 0;
      for (int col = 0; col &lt; 8; col++) {
        int index = row * 8 + col;
        if (index &lt; data.length() && data[index] == '1') {
          matrix[row] |= (1 &lt;&lt; col);
        }
      }
      lc.setRow(0, row, matrix[row]);
    }
    server.send(200, "text/plain", "Pattern set");
  } else {
    server.send(400, "text/plain", "No pattern data");
  }
}
        </div>
    </div>

    <script>
        let ledStates = Array(8).fill().map(() => Array(8).fill(false));
        let espIP = '';

        // Initialize LED matrix
        function initMatrix() {
            const matrix = document.getElementById('ledMatrix');
            matrix.innerHTML = '';
            
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 8; col++) {
                    const led = document.createElement('div');
                    led.className = 'led';
                    led.dataset.row = row;
                    led.dataset.col = col;
                    led.dataset.pos = `${row},${col}`;
                    led.onclick = () => toggleLED(row, col, led);
                    matrix.appendChild(led);
                }
            }
        }

        function toggleLED(row, col, element) {
            ledStates[row][col] = !ledStates[row][col];
            element.classList.toggle('on', ledStates[row][col]);
            
            // Send to ESP32 if connected
            if (espIP) {
                sendLEDState(row, col, ledStates[row][col]);
            }
        }

        function clearAll() {
            ledStates = Array(8).fill().map(() => Array(8).fill(false));
            document.querySelectorAll('.led').forEach(led => {
                led.classList.remove('on');
            });
            
            if (espIP) {
                fetch(`http://${espIP}/clear`).catch(e => console.log('ESP32 not connected'));
            }
        }

        function fillAll() {
            ledStates = Array(8).fill().map(() => Array(8).fill(true));
            document.querySelectorAll('.led').forEach(led => {
                led.classList.add('on');
            });
            sendPattern();
        }

        function sendLEDState(row, col, state) {
            fetch(`http://${espIP}/set?row=${row}&col=${col}&state=${state ? 1 : 0}`)
                .catch(e => console.log('ESP32 communication error'));
        }

        function sendPattern() {
            if (!espIP) {
                espIP = prompt('Enter ESP32 IP address (e.g., 192.168.1.100):');
                if (!espIP) return;
            }
            
            let patternData = '';
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 8; col++) {
                    patternData += ledStates[row][col] ? '1' : '0';
                }
            }
            
            fetch(`http://${espIP}/pattern?data=${patternData}`)
                .then(response => {
                    if (response.ok) {
                        document.getElementById('status').textContent = 'Pattern sent to ESP32 successfully!';
                        document.getElementById('status').style.background = 'rgba(76, 175, 80, 0.3)';
                    }
                })
                .catch(e => {
                    document.getElementById('status').textContent = 'Failed to connect to ESP32. Check IP address.';
                    document.getElementById('status').style.background = 'rgba(244, 67, 54, 0.3)';
                });
        }

        function loadPattern() {
            const pattern = document.getElementById('patternSelect').value;
            clearAll();
            
            const patterns = {
                // Basic patterns
                cross: [[3,3], [3,4], [2,3], [4,3], [1,3], [5,3], [3,2], [3,5], [0,3], [6,3], [3,1], [3,6]],
                border: [[0,0], [0,1], [0,2], [0,3], [0,4], [0,5], [0,6], [0,7], [7,0], [7,1], [7,2], [7,3], [7,4], [7,5], [7,6], [7,7], [1,0], [2,0], [3,0], [4,0], [5,0], [6,0], [1,7], [2,7], [3,7], [4,7], [5,7], [6,7]],
                diagonal: [[0,0], [1,1], [2,2], [3,3], [4,4], [5,5], [6,6], [7,7], [0,7], [1,6], [2,5], [3,4], [4,3], [5,2], [6,1], [7,0]],
                checkerboard: [[0,0], [0,2], [0,4], [0,6], [1,1], [1,3], [1,5], [1,7], [2,0], [2,2], [2,4], [2,6], [3,1], [3,3], [3,5], [3,7], [4,0], [4,2], [4,4], [4,6], [5,1], [5,3], [5,5], [5,7], [6,0], [6,2], [6,4], [6,6], [7,1], [7,3], [7,5], [7,7]],
                heart: [[1,2], [1,3], [1,4], [1,5], [2,1], [2,2], [2,5], [2,6], [3,1], [3,6], [4,2], [4,5], [5,3], [5,4], [6,3]],
                smile: [[1,2], [1,5], [2,1], [2,6], [3,1], [3,6], [4,2], [4,3], [4,4], [4,5], [5,1], [5,6], [6,2], [6,5]],
                
                // Alphabet A-Z
                A: [[0,2], [0,3], [0,4], [0,5], [1,1], [1,6], [2,1], [2,6], [3,1], [3,2], [3,3], [3,4], [3,5], [3,6], [4,1], [4,6], [5,1], [5,6], [6,1], [6,6], [7,1], [7,6]],
                B: [[0,1], [0,2], [0,3], [0,4], [0,5], [1,1], [1,6], [2,1], [2,6], [3,1], [3,2], [3,3], [3,4], [3,5], [4,1], [4,6], [5,1], [5,6], [6,1], [6,6], [7,1], [7,2], [7,3], [7,4], [7,5]],
                C: [[0,2], [0,3], [0,4], [0,5], [1,1], [1,6], [2,1], [3,1], [4,1], [5,1], [6,1], [6,6], [7,2], [7,3], [7,4], [7,5]],
                D: [[0,1], [0,2], [0,3], [0,4], [0,5], [1,1], [1,6], [2,1], [2,7], [3,1], [3,7], [4,1], [4,7], [5,1], [5,7], [6,1], [6,6], [7,1], [7,2], [7,3], [7,4], [7,5]],
                E: [[0,1], [0,2], [0,3], [0,4], [0,5], [0,6], [1,1], [2,1], [3,1], [3,2], [3,3], [3,4], [4,1], [5,1], [6,1], [7,1], [7,2], [7,3], [7,4], [7,5], [7,6]],
                F: [[0,1], [0,2], [0,3], [0,4], [0,5], [0,6], [1,1], [2,1], [3,1], [3,2], [3,3], [3,4], [4,1], [5,1], [6,1], [7,1]],
                G: [[0,2], [0,3], [0,4], [0,5], [1,1], [1,6], [2,1], [3,1], [4,1], [4,4], [4,5], [4,6], [5,1], [5,6], [6,1], [6,6], [7,2], [7,3], [7,4], [7,5]],
                H: [[0,1], [0,6], [1,1], [1,6], [2,1], [2,6], [3,1], [3,2], [3,3], [3,4], [3,5], [3,6], [4,1], [4,6], [5,1], [5,6], [6,1], [6,6], [7,1], [7,6]],
                I: [[0,2], [0,3], [0,4], [0,5], [1,3], [1,4], [2,3], [2,4], [3,3], [3,4], [4,3], [4,4], [5,3], [5,4], [6,3], [6,4], [7,2], [7,3], [7,4], [7,5]],
                J: [[0,4], [0,5], [0,6], [1,5], [2,5], [3,5], [4,5], [5,1], [5,5], [6,1], [6,5], [7,2], [7,3], [7,4]],
                K: [[0,1], [0,6], [1,1], [1,5], [2,1], [2,4], [3,1], [3,2], [3,3], [4,1], [4,4], [5,1], [5,5], [6,1], [6,6], [7,1], [7,7]],
                L: [[0,1], [1,1], [2,1], [3,1], [4,1], [5,1], [6,1], [7,1], [7,2], [7,3], [7,4], [7,5], [7,6]],
                M: [[0,1], [0,7], [1,1], [1,2], [1,6], [1,7], [2,1], [2,3], [2,5], [2,7], [3,1], [3,4], [3,7], [4,1], [4,7], [5,1], [5,7], [6,1], [6,7], [7,1], [7,7]],
                N: [[0,1], [0,7], [1,1], [1,2], [1,7], [2,1], [2,3], [2,7], [3,1], [3,4], [3,7], [4,1], [4,5], [4,7], [5,1], [5,6], [5,7], [6,1], [6,7], [7,1], [7,7]],
                O: [[0,2], [0,3], [0,4], [0,5], [1,1], [1,6], [2,1], [2,6], [3,1], [3,6], [4,1], [4,6], [5,1], [5,6], [6,1], [6,6], [7,2], [7,3], [7,4], [7,5]],
                P: [[0,1], [0,2], [0,3], [0,4], [0,5], [1,1], [1,6], [2,1], [2,6], [3,1], [3,2], [3,3], [3,4], [3,5], [4,1], [5,1], [6,1], [7,1]],
                Q: [[0,2], [0,3], [0,4], [0,5], [1,1], [1,6], [2,1], [2,6], [3,1], [3,6], [4,1], [4,6], [5,1], [5,5], [5,6], [6,1], [6,6], [7,2], [7,3], [7,4], [7,5], [7,6]],
                R: [[0,1], [0,2], [0,3], [0,4], [0,5], [1,1], [1,6], [2,1], [2,6], [3,1], [3,2], [3,3], [3,4], [3,5], [4,1], [4,4], [5,1], [5,5], [6,1], [6,6], [7,1], [7,7]],
                S: [[0,2], [0,3], [0,4], [0,5], [0,6], [1,1], [2,1], [3,2], [3,3], [3,4], [3,5], [4,6], [5,6], [6,1], [6,6], [7,1], [7,2], [7,3], [7,4], [7,5]],
                T: [[0,1], [0,2], [0,3], [0,4], [0,5], [0,6], [0,7], [1,4], [2,4], [3,4], [4,4], [5,4], [6,4], [7,4]],
                U: [[0,1], [0,6], [1,1], [1,6], [2,1], [2,6], [3,1], [3,6], [4,1], [4,6], [5,1], [5,6], [6,1], [6,6], [7,2], [7,3], [7,4], [7,5]],
                V: [[0,1], [0,7], [1,1], [1,7], [2,2], [2,6], [3,2], [3,6], [4,3], [4,5], [5,3], [5,5], [6,4], [7,4]],
                W: [[0,1], [0,7], [1,1], [1,7], [2,1], [2,7], [3,1], [3,7], [4,1], [4,4], [4,7], [5,1], [5,3], [5,5], [5,7], [6,1], [6,2], [6,6], [6,7], [7,1], [7,7]],
                X: [[0,1], [0,7], [1,2], [1,6], [2,3], [2,5], [3,4], [4,3], [4,5], [5,2], [5,6], [6,1], [6,7], [7,1], [7,7]],
                Y: [[0,1], [0,7], [1,2], [1,6], [2,3], [2,5], [3,4], [4,4], [5,4], [6,4], [7,4]],
                Z: [[0,1], [0,2], [0,3], [0,4], [0,5], [0,6], [0,7], [1,6], [2,5], [3,4], [4,3], [5,2], [6,1], [7,1], [7,2], [7,3], [7,4], [7,5], [7,6], [7,7]]
            };
            
            if (patterns[pattern]) {
                patterns[pattern].forEach(([row, col]) => {
                    ledStates[row][col] = true;
                    const led = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
                    led.classList.add('on');
                });
            }
        }

        function randomPattern() {
            clearAll();
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 8; col++) {
                    if (Math.random() > 0.7) {
                        ledStates[row][col] = true;
                        const led = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
                        led.classList.add('on');
                    }
                }
            }
        }

        // Initialize the matrix when page loads
        initMatrix();
    </script>
</body>
</html>
